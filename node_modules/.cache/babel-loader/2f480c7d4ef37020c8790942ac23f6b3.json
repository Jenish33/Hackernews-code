{"ast":null,"code":"import _regeneratorRuntime from\"D:/hackernews-jen/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/hackernews-jen/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/hackernews-jen/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import ReactDOM from\"react-dom\";import axios from\"axios\";import NewsCard from\"./components/NewsCard\";import ReactPaginate from\"react-paginate\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NewsPage=function NewsPage(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),currentPage=_useState2[0],setCurrentPage=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),articles=_useState4[0],setArticles=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),totalPages=_useState8[0],setTotalPages=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),query=_useState10[0],setQuerry=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),searchInput=_useState12[0],setSearchInput=_useState12[1];var handlePageChange=function handlePageChange(event){console.log(event);setCurrentPage(event.selected);};var handleSubmit=function handleSubmit(event){event.preventDefault();setCurrentPage(0);setQuerry(searchInput);};useEffect(function(){setIsLoading(true);var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data,hits,nbPages;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"https://hn.algolia.com/api/v1/search?\",{params:{page:currentPage,query:query}});case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;hits=data.hits,nbPages=data.nbPages;setArticles(hits);setTotalPages(nbPages);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 13:_context.prev=13;setIsLoading(false);return _context.finish(13);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,10,13,16]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[currentPage,query]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container pb-5\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"flex place-items-center container mx-auto lg:max-w-4xl mt-10 px-5\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"w-full py-2 px-4 rounded bg-transparent border border-gray-700 focus:border-gray-600 transition-all duration-150 outline-none text-gray-700 placeholder-gray-700 text-m lg:text-lg mb-4 lg:pb-4 mr-5 mb-4\",placeholder:\"Search for the news\",value:searchInput,onChange:function onChange(event){return setSearchInput(event.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:handleSubmit,className:\"bg-white border border-gray-700 text-m lg:text-lg py-2 px-6 rounded lg:pb-4 text-gray-700 hover:bg-transparent transition-all duration-150 mb-4 lg:mb-4\",children:\"Search\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"news-container\",children:isLoading?/*#__PURE__*/_jsx(\"p\",{style:{color:\"white\"},children:\"Loading...\"}):articles.map(function(article){return/*#__PURE__*/_jsx(NewsCard,{article:article},article.objectID);})}),/*#__PURE__*/_jsx(ReactPaginate,{nextLabel:\">>\",previousLabel:\"<<\",breakLabel:\"...\",forcePage:currentPage,pageCount:totalPages,renderOnZeroPageCount:null,onPageChange:handlePageChange,className:\"pagination\",activeClassName:\"active-page\",previousClassName:\"previous-page\",nextClassName:\"next-page\"})]});};export default NewsPage;","map":{"version":3,"names":["useState","useEffect","ReactDOM","axios","NewsCard","ReactPaginate","NewsPage","currentPage","setCurrentPage","articles","setArticles","isLoading","setIsLoading","totalPages","setTotalPages","query","setQuerry","searchInput","setSearchInput","handlePageChange","event","console","log","selected","handleSubmit","preventDefault","fetchData","get","params","page","data","hits","nbPages","target","value","color","map","article","objectID"],"sources":["D:/hackernews-jen/src/NewsPage.js"],"sourcesContent":["import{ useState, useEffect } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport axios from \"axios\";\r\nimport NewsCard from \"./components/NewsCard\"\r\nimport ReactPaginate from \"react-paginate\"\r\n\r\nconst NewsPage = () =>{\r\n  const [currentPage, setCurrentPage] = useState(0);\r\n  const [articles, setArticles] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const [query, setQuerry] = useState(\"\");\r\n  const [searchInput, setSearchInput] = useState(\"\");\r\n\r\n  const handlePageChange = event => {\r\n    console.log(event);\r\n    setCurrentPage(event.selected);\r\n  }\r\n\r\n  const handleSubmit = event => {\r\n    event.preventDefault();\r\n    setCurrentPage(0);\r\n    setQuerry(searchInput);\r\n  }\r\n\r\n  useEffect(() => {\r\n    setIsLoading(true);\r\n    const fetchData = async() => {\r\n      try {\r\n          const { data } = await axios.get(\"https://hn.algolia.com/api/v1/search?\", \r\n          {\r\n            params: {page: currentPage, query},\r\n          }\r\n          );\r\n          const  { hits, nbPages } = data;\r\n          setArticles(hits);\r\n          setTotalPages(nbPages);\r\n      } catch (err) {\r\n          console.log(err);\r\n      } finally {\r\n          setIsLoading(false);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [currentPage, query])\r\n\r\n\r\n  return(\r\n    <div className=\"container pb-5\">\r\n      <form onSubmit={handleSubmit} className=\"flex place-items-center container mx-auto lg:max-w-4xl mt-10 px-5\">\r\n        <input className=\"w-full py-2 px-4 rounded bg-transparent border border-gray-700 focus:border-gray-600 transition-all duration-150 outline-none text-gray-700 placeholder-gray-700 text-m lg:text-lg mb-4 lg:pb-4 mr-5 mb-4\" placeholder=\"Search for the news\" value={searchInput} onChange={event => setSearchInput(event.target.value)}\r\n        />\r\n        <button type=\"submit\" onClick={handleSubmit} className=\"bg-white border border-gray-700 text-m lg:text-lg py-2 px-6 rounded lg:pb-4 text-gray-700 hover:bg-transparent transition-all duration-150 mb-4 lg:mb-4\">Search</button>\r\n      </form>  \r\n      <div className=\"news-container\">\r\n        {\r\n          isLoading ? (\r\n            <p style={{color: \"white\"}}>Loading...</p>\r\n          ) : (\r\n            articles.map((article) => (\r\n              <NewsCard article={article} key={article.objectID} />\r\n            ))\r\n          )\r\n        }\r\n      </div>\r\n\r\n      <ReactPaginate \r\n        nextLabel = \">>\"\r\n        previousLabel = \"<<\"\r\n        breakLabel = \"...\"\r\n        forcePage={currentPage}\r\n        pageCount={totalPages}\r\n        renderOnZeroPageCount={null}\r\n        onPageChange={handlePageChange}\r\n        className=\"pagination\"\r\n        activeClassName=\"active-page\"\r\n        previousClassName=\"previous-page\"\r\n        nextClassName=\"next-page\"\r\n      />\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default NewsPage;"],"mappings":"qUAAA,OAAQA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC1C,MAAOC,SAAQ,KAAM,WAAW,CAChC,MAAOC,MAAK,KAAM,OAAO,CACzB,MAAOC,SAAQ,KAAM,uBAAuB,CAC5C,MAAOC,cAAa,KAAM,gBAAgB,yFAE1C,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,EAAQ,CACpB,cAAsCN,QAAQ,CAAC,CAAC,CAAC,wCAA1CO,WAAW,eAAEC,cAAc,eAClC,eAAgCR,QAAQ,CAAC,EAAE,CAAC,yCAArCS,QAAQ,eAAEC,WAAW,eAC5B,eAAkCV,QAAQ,CAAC,IAAI,CAAC,yCAAzCW,SAAS,eAAEC,YAAY,eAC9B,eAAoCZ,QAAQ,CAAC,CAAC,CAAC,yCAAxCa,UAAU,eAAEC,aAAa,eAChC,eAA2Bd,QAAQ,CAAC,EAAE,CAAC,0CAAhCe,KAAK,gBAAEC,SAAS,gBACvB,gBAAsChB,QAAQ,CAAC,EAAE,CAAC,2CAA3CiB,WAAW,gBAAEC,cAAc,gBAElC,GAAMC,iBAAgB,CAAG,QAAnBA,iBAAgB,CAAGC,KAAK,CAAI,CAChCC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CAClBZ,cAAc,CAACY,KAAK,CAACG,QAAQ,CAAC,CAChC,CAAC,CAED,GAAMC,aAAY,CAAG,QAAfA,aAAY,CAAGJ,KAAK,CAAI,CAC5BA,KAAK,CAACK,cAAc,EAAE,CACtBjB,cAAc,CAAC,CAAC,CAAC,CACjBQ,SAAS,CAACC,WAAW,CAAC,CACxB,CAAC,CAEDhB,SAAS,CAAC,UAAM,CACdW,YAAY,CAAC,IAAI,CAAC,CAClB,GAAMc,UAAS,4FAAG,kNAEWvB,MAAK,CAACwB,GAAG,CAAC,uCAAuC,CACxE,CACEC,MAAM,CAAE,CAACC,IAAI,CAAEtB,WAAW,CAAEQ,KAAK,CAALA,KAAK,CACnC,CAAC,CACA,uCAJOe,IAAI,kBAAJA,IAAI,CAKHC,IAAI,CAAcD,IAAI,CAAtBC,IAAI,CAAEC,OAAO,CAAKF,IAAI,CAAhBE,OAAO,CACtBtB,WAAW,CAACqB,IAAI,CAAC,CACjBjB,aAAa,CAACkB,OAAO,CAAC,CAAC,iFAEvBX,OAAO,CAACC,GAAG,aAAK,CAAC,yBAEjBV,YAAY,CAAC,KAAK,CAAC,CAAC,sGAEzB,kBAfKc,UAAS,0CAed,CACDA,SAAS,EAAE,CACb,CAAC,CAAE,CAACnB,WAAW,CAAEQ,KAAK,CAAC,CAAC,CAGxB,mBACE,aAAK,SAAS,CAAC,gBAAgB,wBAC7B,cAAM,QAAQ,CAAES,YAAa,CAAC,SAAS,CAAC,mEAAmE,wBACzG,cAAO,SAAS,CAAC,2MAA2M,CAAC,WAAW,CAAC,qBAAqB,CAAC,KAAK,CAAEP,WAAY,CAAC,QAAQ,CAAE,kBAAAG,KAAK,QAAIF,eAAc,CAACE,KAAK,CAACa,MAAM,CAACC,KAAK,CAAC,EAAC,EACvU,cACF,eAAQ,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAEV,YAAa,CAAC,SAAS,CAAC,yJAAyJ,oBAAgB,GAC3N,cACP,YAAK,SAAS,CAAC,gBAAgB,UAE3Bb,SAAS,cACP,UAAG,KAAK,CAAE,CAACwB,KAAK,CAAE,OAAO,CAAE,wBAAe,CAE1C1B,QAAQ,CAAC2B,GAAG,CAAC,SAACC,OAAO,qBACnB,KAAC,QAAQ,EAAC,OAAO,CAAEA,OAAQ,EAAMA,OAAO,CAACC,QAAQ,CAAI,EACtD,CACF,EAEC,cAEN,KAAC,aAAa,EACZ,SAAS,CAAG,IAAI,CAChB,aAAa,CAAG,IAAI,CACpB,UAAU,CAAG,KAAK,CAClB,SAAS,CAAE/B,WAAY,CACvB,SAAS,CAAEM,UAAW,CACtB,qBAAqB,CAAE,IAAK,CAC5B,YAAY,CAAEM,gBAAiB,CAC/B,SAAS,CAAC,YAAY,CACtB,eAAe,CAAC,aAAa,CAC7B,iBAAiB,CAAC,eAAe,CACjC,aAAa,CAAC,WAAW,EACzB,GACE,CAEV,CAAC,CAED,cAAeb,SAAQ"},"metadata":{},"sourceType":"module"}